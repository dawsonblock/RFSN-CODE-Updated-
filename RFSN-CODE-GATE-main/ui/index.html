<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ RFSN SWE-Bench Killer - AI Code Agent</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="enhancements.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üöÄ</span>
                    <h1>RFSN SWE-Bench Killer</h1>
                    <span class="version-badge">v0.4.0</span>
                </div>
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span class="status-text" id="statusText">Ready</span>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab active" data-tab="config">
                <span class="tab-icon">‚öôÔ∏è</span>
                Configuration
            </button>
            <button class="tab" data-tab="process">
                <span class="tab-icon">üîÑ</span>
                Live Process
            </button>
            <button class="tab" data-tab="results">
                <span class="tab-icon">üìä</span>
                Results
            </button>
            <button class="tab" data-tab="history">
                <span class="tab-icon">üìú</span>
                History
            </button>
        </nav>

        <!-- Tab Content -->
        <main class="content">
            <!-- Configuration Tab -->
            <div class="tab-content active" id="config">
                <div class="content-grid">
                    <!-- GitHub Repository Section -->
                    <section class="card card-primary">
                        <h2 class="card-title">
                            <span class="card-icon">üìÅ</span>
                            GitHub Repository
                        </h2>
                        <div class="form-group">
                            <label for="repoUrl">Repository URL</label>
                            <input 
                                type="text" 
                                id="repoUrl" 
                                class="input" 
                                placeholder="https://github.com/owner/repo"
                                value="">
                            <small class="input-hint">Enter the full GitHub repository URL</small>
                        </div>
                        <div class="form-group">
                            <label for="repoBranch">Branch / Commit</label>
                            <input 
                                type="text" 
                                id="repoBranch" 
                                class="input" 
                                placeholder="main or commit SHA"
                                value="main">
                        </div>
                        <div class="form-group">
                            <label for="problemStatement">Problem Statement</label>
                            <textarea 
                                id="problemStatement" 
                                class="textarea" 
                                rows="6"
                                placeholder="Describe the bug or issue to fix..."></textarea>
                            <small class="input-hint">Clear description helps localization</small>
                        </div>
                    </section>

                    <!-- GitHub Credentials Section -->
                    <section class="card card-secondary">
                        <h2 class="card-title">
                            <span class="card-icon">üîë</span>
                            GitHub Credentials
                        </h2>
                        <div class="form-group">
                            <label for="githubToken">Personal Access Token</label>
                            <input 
                                type="password" 
                                id="githubToken" 
                                class="input" 
                                placeholder="ghp_xxxxxxxxxxxx">
                            <small class="input-hint">Required for private repos and PR creation</small>
                        </div>
                        <div class="form-group">
                            <label for="githubUsername">GitHub Username</label>
                            <input 
                                type="text" 
                                id="githubUsername" 
                                class="input" 
                                placeholder="your-username">
                        </div>
                        <div class="checkbox-group">
                            <label class="checkbox">
                                <input type="checkbox" id="createPR">
                                <span>Create Pull Request automatically</span>
                            </label>
                            <label class="checkbox">
                                <input type="checkbox" id="commitChanges" checked>
                                <span>Commit changes</span>
                            </label>
                        </div>
                    </section>

                    <!-- API Keys Section -->
                    <section class="card card-accent">
                        <h2 class="card-title">
                            <span class="card-icon">ü§ñ</span>
                            LLM API Keys
                        </h2>
                        <div class="form-group">
                            <label for="llmProvider">LLM Provider</label>
                            <select id="llmProvider" class="select">
                                <option value="openai">OpenAI (GPT-4)</option>
                                <option value="anthropic">Anthropic (Claude)</option>
                                <option value="google">Google (Gemini)</option>
                                <option value="deepseek" selected>DeepSeek</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="llmApiKey">API Key</label>
                            <input 
                                type="password" 
                                id="llmApiKey" 
                                class="input" 
                                placeholder="sk-...">
                        </div>
                        <div class="form-group">
                            <label for="llmModel">Model</label>
                            <input 
                                type="text" 
                                id="llmModel" 
                                class="input" 
                                placeholder="deepseek-chat"
                                value="deepseek-chat">
                        </div>
                        <div class="form-group">
                            <label>Temperature</label>
                            <input 
                                type="range" 
                                id="temperature" 
                                class="slider" 
                                min="0" 
                                max="1" 
                                step="0.1" 
                                value="0.2">
                            <small class="input-hint">Current: <span id="tempValue">0.2</span></small>
                        </div>
                    </section>

                    <!-- Execution Settings Section -->
                    <section class="card card-info">
                        <h2 class="card-title">
                            <span class="card-icon">‚ö°</span>
                            Execution Settings
                        </h2>
                        <div class="form-group">
                            <label for="profile">Profile</label>
                            <select id="profile" class="select">
                                <option value="swebench_lite" selected>SWE-bench Lite</option>
                                <option value="swebench_verified">SWE-bench Verified</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="maxSteps">Max Steps</label>
                                <input 
                                    type="number" 
                                    id="maxSteps" 
                                    class="input" 
                                    value="50"
                                    min="1"
                                    max="200">
                            </div>
                            <div class="form-group">
                                <label for="maxTime">Max Time (min)</label>
                                <input 
                                    type="number" 
                                    id="maxTime" 
                                    class="input" 
                                    value="30"
                                    min="1"
                                    max="120">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Localization Layers</label>
                            <div class="checkbox-group">
                                <label class="checkbox">
                                    <input type="checkbox" id="useTrace" checked>
                                    <span>üéØ Stack Trace</span>
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" id="useRipgrep" checked>
                                    <span>üîç Ripgrep (Lexical)</span>
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" id="useSymbols" checked>
                                    <span>üîó Symbol Index</span>
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" id="useEmbeddings">
                                    <span>üß† Embeddings (Semantic)</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Patch Strategies</label>
                            <div class="checkbox-group">
                                <label class="checkbox">
                                    <input type="checkbox" id="strategyDirect" checked>
                                    <span>Direct Fix</span>
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" id="strategyTestDriven" checked>
                                    <span>Test-Driven</span>
                                </label>
                                <label class="checkbox">
                                    <input type="checkbox" id="strategyEnsemble" checked>
                                    <span>Ensemble</span>
                                </label>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Action Buttons -->
                <div class="action-bar">
                    <button class="btn btn-secondary" id="saveConfigBtn">
                        <span class="btn-icon">üíæ</span>
                        Save Configuration
                    </button>
                    <button class="btn btn-primary" id="startBtn">
                        <span class="btn-icon">üöÄ</span>
                        Start Agent
                    </button>
                </div>
            </div>

            <!-- Live Process Tab -->
            <div class="tab-content" id="process">
                <div class="process-container">
                    <!-- Progress Overview -->
                    <section class="card card-progress">
                        <h2 class="card-title">
                            <span class="card-icon">üìà</span>
                            Progress Overview
                        </h2>
                        <div class="progress-stats">
                            <div class="stat-card">
                                <div class="stat-value" id="currentPhase">IDLE</div>
                                <div class="stat-label">Current Phase</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stepsCompleted">0 / 0</div>
                                <div class="stat-label">Steps</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="patchesTried">0</div>
                                <div class="stat-label">Patches Tried</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="elapsedTime">0:00</div>
                                <div class="stat-label">Elapsed</div>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                    </section>

                    <!-- Live Log -->
                    <section class="card card-log">
                        <h2 class="card-title">
                            <span class="card-icon">üìù</span>
                            Live Log
                            <button class="btn-icon-only" id="clearLogBtn" title="Clear log">
                                üóëÔ∏è
                            </button>
                        </h2>
                        <div class="log-container" id="logContainer">
                            <div class="log-entry log-info">
                                <span class="log-time">00:00:00</span>
                                <span class="log-message">Agent ready. Configure and start to begin.</span>
                            </div>
                        </div>
                    </section>

                    <!-- Current Activity -->
                    <section class="card card-activity">
                        <h2 class="card-title">
                            <span class="card-icon">‚ö°</span>
                            Current Activity
                        </h2>
                        <div class="activity-content" id="activityContent">
                            <div class="activity-idle">
                                <span class="activity-icon">üò¥</span>
                                <p>No active task</p>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Control Buttons -->
                <div class="action-bar">
                    <button class="btn btn-danger" id="stopBtn" disabled>
                        <span class="btn-icon">‚èπÔ∏è</span>
                        Stop Agent
                    </button>
                    <button class="btn btn-secondary" id="pauseBtn" disabled>
                        <span class="btn-icon">‚è∏Ô∏è</span>
                        Pause
                    </button>
                </div>
            </div>

            <!-- Results Tab -->
            <div class="tab-content" id="results">
                <div class="results-container">
                    <section class="card">
                        <h2 class="card-title">
                            <span class="card-icon">üéØ</span>
                            Task Results
                        </h2>
                        <div id="resultsContent">
                            <div class="empty-state">
                                <span class="empty-icon">üì≠</span>
                                <p>No results yet. Run the agent to see results here.</p>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="history">
                <div class="history-container">
                    <section class="card">
                        <h2 class="card-title">
                            <span class="card-icon">üìú</span>
                            Task History
                        </h2>
                        <div id="historyContent">
                            <div class="empty-state">
                                <span class="empty-icon">üì≠</span>
                                <p>No history yet. Completed tasks will appear here.</p>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>RFSN Controller v0.4.0 | Built with ‚ù§Ô∏è for automated bug fixing</p>
        </footer>
    </div>

    <script src="app.js"></script>
    <script src="enhancements.js"></script>
</body>
</html>
